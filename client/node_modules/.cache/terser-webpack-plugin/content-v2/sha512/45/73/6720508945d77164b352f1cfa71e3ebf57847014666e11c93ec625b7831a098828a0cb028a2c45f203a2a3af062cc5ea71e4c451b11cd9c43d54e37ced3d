{"code":"(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{59:function(e,n){throw new Error('Module build failed (from ./node_modules/babel-loader/lib/index.js):\\nSyntaxError: C:\\\\Users\\\\emily\\\\OneDrive\\\\Desktop\\\\bootcamp\\\\challenges\\\\book-search-engine\\\\client\\\\src\\\\pages\\\\SearchBooks.js: Identifier \\'searchGoogleBooks\\' has already been declared (16:9)\\n\\n\\x1b[0m \\x1b[90m 14 |\\x1b[39m\\x1b[0m\\n\\x1b[0m \\x1b[90m 15 |\\x1b[39m \\x1b[36mimport\\x1b[39m { saveBookIds\\x1b[33m,\\x1b[39m getSavedBookIds } \\x1b[36mfrom\\x1b[39m \\x1b[32m\"../utils/localStorage\"\\x1b[39m\\x1b[33m;\\x1b[39m\\x1b[0m\\n\\x1b[0m\\x1b[31m\\x1b[1m>\\x1b[22m\\x1b[39m\\x1b[90m 16 |\\x1b[39m \\x1b[36mimport\\x1b[39m { searchGoogleBooks } \\x1b[36mfrom\\x1b[39m \\x1b[32m\"../utils/API.js\"\\x1b[39m\\x1b[33m;\\x1b[39m\\x1b[0m\\n\\x1b[0m \\x1b[90m    |\\x1b[39m          \\x1b[31m\\x1b[1m^\\x1b[22m\\x1b[39m\\x1b[0m\\n\\x1b[0m \\x1b[90m 17 |\\x1b[39m \\x1b[36mimport\\x1b[39m { useMutation } \\x1b[36mfrom\\x1b[39m \\x1b[32m\"@apollo/react-hooks\"\\x1b[39m\\x1b[33m;\\x1b[39m\\x1b[0m\\n\\x1b[0m \\x1b[90m 18 |\\x1b[39m\\x1b[0m\\n\\x1b[0m \\x1b[90m 19 |\\x1b[39m \\x1b[36mconst\\x1b[39m \\x1b[33mSearchBooks\\x1b[39m \\x1b[33m=\\x1b[39m () \\x1b[33m=>\\x1b[39m {\\x1b[0m\\n    at _temp._raise (C:\\\\Users\\\\emily\\\\OneDrive\\\\Desktop\\\\bootcamp\\\\challenges\\\\book-search-engine\\\\client\\\\node_modules\\\\@babel\\\\parser\\\\lib\\\\index.js:776:17)\\n    at _temp.raiseWithData (C:\\\\Users\\\\emily\\\\OneDrive\\\\Desktop\\\\bootcamp\\\\challenges\\\\book-search-engine\\\\client\\\\node_modules\\\\@babel\\\\parser\\\\lib\\\\index.js:769:17)\\n    at _temp.raise (C:\\\\Users\\\\emily\\\\OneDrive\\\\Desktop\\\\bootcamp\\\\challenges\\\\book-search-engine\\\\client\\\\node_modules\\\\@babel\\\\parser\\\\lib\\\\index.js:737:17)\\n    at FlowScopeHandler.checkRedeclarationInScope (C:\\\\Users\\\\emily\\\\OneDrive\\\\Desktop\\\\bootcamp\\\\challenges\\\\book-search-engine\\\\client\\\\node_modules\\\\@babel\\\\parser\\\\lib\\\\index.js:1453:12)\\n    at FlowScopeHandler.declareName (C:\\\\Users\\\\emily\\\\OneDrive\\\\Desktop\\\\bootcamp\\\\challenges\\\\book-search-engine\\\\client\\\\node_modules\\\\@babel\\\\parser\\\\lib\\\\index.js:1419:12)\\n    at FlowScopeHandler.declareName (C:\\\\Users\\\\emily\\\\OneDrive\\\\Desktop\\\\bootcamp\\\\challenges\\\\book-search-engine\\\\client\\\\node_modules\\\\@babel\\\\parser\\\\lib\\\\index.js:1526:11)\\n    at _temp.checkLVal (C:\\\\Users\\\\emily\\\\OneDrive\\\\Desktop\\\\bootcamp\\\\challenges\\\\book-search-engine\\\\client\\\\node_modules\\\\@babel\\\\parser\\\\lib\\\\index.js:10260:24)\\n    at _temp.checkLVal (C:\\\\Users\\\\emily\\\\OneDrive\\\\Desktop\\\\bootcamp\\\\challenges\\\\book-search-engine\\\\client\\\\node_modules\\\\@babel\\\\parser\\\\lib\\\\index.js:3364:22)\\n    at _temp.parseImportSpecifier (C:\\\\Users\\\\emily\\\\OneDrive\\\\Desktop\\\\bootcamp\\\\challenges\\\\book-search-engine\\\\client\\\\node_modules\\\\@babel\\\\parser\\\\lib\\\\index.js:3651:12)\\n    at _temp.parseNamedImportSpecifiers (C:\\\\Users\\\\emily\\\\OneDrive\\\\Desktop\\\\bootcamp\\\\challenges\\\\book-search-engine\\\\client\\\\node_modules\\\\@babel\\\\parser\\\\lib\\\\index.js:13843:12)\\n    at _temp.parseImport (C:\\\\Users\\\\emily\\\\OneDrive\\\\Desktop\\\\bootcamp\\\\challenges\\\\book-search-engine\\\\client\\\\node_modules\\\\@babel\\\\parser\\\\lib\\\\index.js:13674:39)\\n    at _temp.parseStatementContent (C:\\\\Users\\\\emily\\\\OneDrive\\\\Desktop\\\\bootcamp\\\\challenges\\\\book-search-engine\\\\client\\\\node_modules\\\\@babel\\\\parser\\\\lib\\\\index.js:12359:27)\\n    at _temp.parseStatement (C:\\\\Users\\\\emily\\\\OneDrive\\\\Desktop\\\\bootcamp\\\\challenges\\\\book-search-engine\\\\client\\\\node_modules\\\\@babel\\\\parser\\\\lib\\\\index.js:12259:17)\\n    at _temp.parseStatement (C:\\\\Users\\\\emily\\\\OneDrive\\\\Desktop\\\\bootcamp\\\\challenges\\\\book-search-engine\\\\client\\\\node_modules\\\\@babel\\\\parser\\\\lib\\\\index.js:2957:26)\\n    at _temp.parseBlockOrModuleBlockBody (C:\\\\Users\\\\emily\\\\OneDrive\\\\Desktop\\\\bootcamp\\\\challenges\\\\book-search-engine\\\\client\\\\node_modules\\\\@babel\\\\parser\\\\lib\\\\index.js:12845:25)\\n    at _temp.parseBlockBody (C:\\\\Users\\\\emily\\\\OneDrive\\\\Desktop\\\\bootcamp\\\\challenges\\\\book-search-engine\\\\client\\\\node_modules\\\\@babel\\\\parser\\\\lib\\\\index.js:12836:10)')},73:function(e,n,t){},83:function(e,n,t){\"use strict\";t.r(n);var a=t(0),r=t.n(a),o=t(27),s=t.n(o),c=(t(72),t(73),t(37)),i=t(11),l=t(59),d=t.n(l),b=t(22),m=t.n(b),j=t(32),u=t(17),p=t(87),h=t(88),g=t(89),O=t(98),x=t(90),k=function(e,n){return fetch(\"/api/users/books/\".concat(e),{method:\"DELETE\",headers:{authorization:\"Bearer \".concat(n)}})},v=t(60),f=t(61),y=t(52),w=new(function(){function e(){Object(v.a)(this,e)}return Object(f.a)(e,[{key:\"getProfile\",value:function(){return Object(y.a)(this.getToken())}},{key:\"loggedIn\",value:function(){var e=this.getToken();return!!e&&!this.isTokenExpired(e)}},{key:\"isTokenExpired\",value:function(e){try{return Object(y.a)(e).exp<Date.now()/1e3}catch(n){return!1}}},{key:\"getToken\",value:function(){return localStorage.getItem(\"id_token\")}},{key:\"login\",value:function(e){localStorage.setItem(\"id_token\",e),window.location.assign(\"/\")}},{key:\"logout\",value:function(){localStorage.removeItem(\"id_token\"),window.location.assign(\"/\")}}]),e}()),S=function(e){var n=localStorage.getItem(\"saved_books\")?JSON.parse(localStorage.getItem(\"saved_books\")):null;if(!n)return!1;var t=null===n||void 0===n?void 0:n.filter((function(n){return n!==e}));return localStorage.setItem(\"saved_books\",JSON.stringify(t)),!0},C=t(2),D=function(){var e=Object(a.useState)({}),n=Object(u.a)(e,2),t=n[0],r=n[1],o=Object.keys(t).length,s=function(){var e=Object(j.a)(m.a.mark((function e(n){var t,a,o;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=w.loggedIn()?w.getToken():null){e.next=3;break}return e.abrupt(\"return\",!1);case 3:return e.prev=3,e.next=6,k(n,t);case 6:if((a=e.sent).ok){e.next=9;break}throw new Error(\"something went wrong!\");case 9:return e.next=11,a.json();case 11:o=e.sent,r(o),S(n),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(3),console.error(e.t0);case 19:case\"end\":return e.stop()}}),e,null,[[3,16]])})));return function(n){return e.apply(this,arguments)}}();return o?Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(p.a,{fluid:!0,className:\"text-light bg-dark\",children:Object(C.jsx)(h.a,{children:Object(C.jsx)(\"h1\",{children:\"Viewing saved books!\"})})}),Object(C.jsxs)(h.a,{children:[Object(C.jsx)(\"h2\",{children:t.savedBooks.length?\"Viewing \".concat(t.savedBooks.length,\" saved \").concat(1===t.savedBooks.length?\"book\":\"books\",\":\"):\"You have no saved books!\"}),Object(C.jsx)(g.a,{children:t.savedBooks.map((function(e){return Object(C.jsxs)(O.a,{border:\"dark\",children:[e.image?Object(C.jsx)(O.a.Img,{src:e.image,alt:\"The cover for \".concat(e.title),variant:\"top\"}):null,Object(C.jsxs)(O.a.Body,{children:[Object(C.jsx)(O.a.Title,{children:e.title}),Object(C.jsxs)(\"p\",{className:\"small\",children:[\"Authors: \",e.authors]}),Object(C.jsx)(O.a.Text,{children:e.description}),Object(C.jsx)(x.a,{className:\"btn-block btn-danger\",onClick:function(){return s(e.bookId)},children:\"Delete this Book!\"})]})]},e.bookId)}))})]})]}):Object(C.jsx)(\"h2\",{children:\"LOADING...\"})},_=t(95),B=t(94),I=t(92),U=t(96),F=t(34),L=t(35),T=t(93),E=t(91),N=function(){var e=Object(a.useState)({username:\"\",email:\"\",password:\"\"}),n=Object(u.a)(e,2),t=n[0],r=n[1],o=Object(a.useState)(!1),s=Object(u.a)(o,1)[0],c=Object(a.useState)(!1),i=Object(u.a)(c,2),l=i[0],d=i[1],b=function(e){var n=e.target,a=n.name,o=n.value;r(Object(L.a)(Object(L.a)({},t),{},Object(F.a)({},a,o)))},p=function(){var e=Object(j.a)(m.a.mark((function e(n){var a,o,s,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),!1===n.currentTarget.checkValidity()&&(n.preventDefault(),n.stopPropagation()),e.prev=3,e.next=6,i=t,fetch(\"/api/users\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify(i)});case 6:if((a=e.sent).ok){e.next=9;break}throw new Error(\"something went wrong!\");case 9:return e.next=11,a.json();case 11:o=e.sent,s=o.token,c=o.user,console.log(c),w.login(s),e.next=22;break;case 18:e.prev=18,e.t0=e.catch(3),console.error(e.t0),d(!0);case 22:r({username:\"\",email:\"\",password:\"\"});case 23:case\"end\":return e.stop()}var i}),e,null,[[3,18]])})));return function(n){return e.apply(this,arguments)}}();return Object(C.jsx)(C.Fragment,{children:Object(C.jsxs)(T.a,{noValidate:!0,validated:s,onSubmit:p,children:[Object(C.jsx)(E.a,{dismissible:!0,onClose:function(){return d(!1)},show:l,variant:\"danger\",children:\"Something went wrong with your signup!\"}),Object(C.jsxs)(T.a.Group,{children:[Object(C.jsx)(T.a.Label,{htmlFor:\"username\",children:\"Username\"}),Object(C.jsx)(T.a.Control,{type:\"text\",placeholder:\"Your username\",name:\"username\",onChange:b,value:t.username,required:!0}),Object(C.jsx)(T.a.Control.Feedback,{type:\"invalid\",children:\"Username is required!\"})]}),Object(C.jsxs)(T.a.Group,{children:[Object(C.jsx)(T.a.Label,{htmlFor:\"email\",children:\"Email\"}),Object(C.jsx)(T.a.Control,{type:\"email\",placeholder:\"Your email address\",name:\"email\",onChange:b,value:t.email,required:!0}),Object(C.jsx)(T.a.Control.Feedback,{type:\"invalid\",children:\"Email is required!\"})]}),Object(C.jsxs)(T.a.Group,{children:[Object(C.jsx)(T.a.Label,{htmlFor:\"password\",children:\"Password\"}),Object(C.jsx)(T.a.Control,{type:\"password\",placeholder:\"Your password\",name:\"password\",onChange:b,value:t.password,required:!0}),Object(C.jsx)(T.a.Control.Feedback,{type:\"invalid\",children:\"Password is required!\"})]}),Object(C.jsx)(x.a,{disabled:!(t.username&&t.email&&t.password),type:\"submit\",variant:\"success\",children:\"Submit\"})]})})},q=function(){var e=Object(a.useState)({email:\"\",password:\"\"}),n=Object(u.a)(e,2),t=n[0],r=n[1],o=Object(a.useState)(!1),s=Object(u.a)(o,1)[0],c=Object(a.useState)(!1),i=Object(u.a)(c,2),l=i[0],d=i[1],b=function(e){var n=e.target,a=n.name,o=n.value;r(Object(L.a)(Object(L.a)({},t),{},Object(F.a)({},a,o)))},p=function(){var e=Object(j.a)(m.a.mark((function e(n){var a,o,s,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),!1===n.currentTarget.checkValidity()&&(n.preventDefault(),n.stopPropagation()),e.prev=3,e.next=6,i=t,fetch(\"/api/users/login\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify(i)});case 6:if((a=e.sent).ok){e.next=9;break}throw new Error(\"something went wrong!\");case 9:return e.next=11,a.json();case 11:o=e.sent,s=o.token,c=o.user,console.log(c),w.login(s),e.next=22;break;case 18:e.prev=18,e.t0=e.catch(3),console.error(e.t0),d(!0);case 22:r({username:\"\",email:\"\",password:\"\"});case 23:case\"end\":return e.stop()}var i}),e,null,[[3,18]])})));return function(n){return e.apply(this,arguments)}}();return Object(C.jsx)(C.Fragment,{children:Object(C.jsxs)(T.a,{noValidate:!0,validated:s,onSubmit:p,children:[Object(C.jsx)(E.a,{dismissible:!0,onClose:function(){return d(!1)},show:l,variant:\"danger\",children:\"Something went wrong with your login credentials!\"}),Object(C.jsxs)(T.a.Group,{children:[Object(C.jsx)(T.a.Label,{htmlFor:\"email\",children:\"Email\"}),Object(C.jsx)(T.a.Control,{type:\"text\",placeholder:\"Your email\",name:\"email\",onChange:b,value:t.email,required:!0}),Object(C.jsx)(T.a.Control.Feedback,{type:\"invalid\",children:\"Email is required!\"})]}),Object(C.jsxs)(T.a.Group,{children:[Object(C.jsx)(T.a.Label,{htmlFor:\"password\",children:\"Password\"}),Object(C.jsx)(T.a.Control,{type:\"password\",placeholder:\"Your password\",name:\"password\",onChange:b,value:t.password,required:!0}),Object(C.jsx)(T.a.Control.Feedback,{type:\"invalid\",children:\"Password is required!\"})]}),Object(C.jsx)(x.a,{disabled:!(t.email&&t.password),type:\"submit\",variant:\"success\",children:\"Submit\"})]})})},P=function(){var e=Object(a.useState)(!1),n=Object(u.a)(e,2),t=n[0],r=n[1];return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(_.a,{bg:\"dark\",variant:\"dark\",expand:\"lg\",children:Object(C.jsxs)(h.a,{fluid:!0,children:[Object(C.jsx)(_.a.Brand,{as:c.b,to:\"/\",children:\"Google Books Search\"}),Object(C.jsx)(_.a.Toggle,{\"aria-controls\":\"navbar\"}),Object(C.jsx)(_.a.Collapse,{id:\"navbar\",children:Object(C.jsxs)(B.a,{className:\"ml-auto\",children:[Object(C.jsx)(B.a.Link,{as:c.b,to:\"/\",children:\"Search For Books\"}),w.loggedIn()?Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(B.a.Link,{as:c.b,to:\"/saved\",children:\"See Your Books\"}),Object(C.jsx)(B.a.Link,{onClick:w.logout,children:\"Logout\"})]}):Object(C.jsx)(B.a.Link,{onClick:function(){return r(!0)},children:\"Login/Sign Up\"})]})})]})}),Object(C.jsx)(I.a,{size:\"lg\",show:t,onHide:function(){return r(!1)},\"aria-labelledby\":\"signup-modal\",children:Object(C.jsxs)(U.a.Container,{defaultActiveKey:\"login\",children:[Object(C.jsx)(I.a.Header,{closeButton:!0,children:Object(C.jsx)(I.a.Title,{id:\"signup-modal\",children:Object(C.jsxs)(B.a,{variant:\"pills\",children:[Object(C.jsx)(B.a.Item,{children:Object(C.jsx)(B.a.Link,{eventKey:\"login\",children:\"Login\"})}),Object(C.jsx)(B.a.Item,{children:Object(C.jsx)(B.a.Link,{eventKey:\"signup\",children:\"Sign Up\"})})]})})}),Object(C.jsx)(I.a.Body,{children:Object(C.jsxs)(U.a.Content,{children:[Object(C.jsx)(U.a.Pane,{eventKey:\"login\",children:Object(C.jsx)(q,{handleModalClose:function(){return r(!1)}})}),Object(C.jsx)(U.a.Pane,{eventKey:\"signup\",children:Object(C.jsx)(N,{handleModalClose:function(){return r(!1)}})})]})})]})})]})};new(t(97).a)({request:function(e){var n=localStorage.getItem(\"id_token\");e.setContext({headers:{authorization:n?\"Bearer \".concat(n):\"\"}})},uri:\"/graphql\"});var G=function(){return Object(C.jsx)(c.a,{children:Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(P,{}),Object(C.jsxs)(i.c,{children:[Object(C.jsx)(i.a,{exact:!0,path:\"/\",component:d.a}),Object(C.jsx)(i.a,{exact:!0,path:\"/saved\",component:D}),Object(C.jsx)(i.a,{render:function(){return Object(C.jsx)(\"h1\",{className:\"display-2\",children:\"Wrong page!\"})}})]})]})})};s.a.render(Object(C.jsx)(r.a.StrictMode,{children:Object(C.jsx)(G,{})}),document.getElementById(\"root\"))}},[[83,1,2]]]);","name":"static/js/main.35d91762.chunk.js","map":{"version":3,"sources":["static/js/main.35d91762.chunk.js"],"names":["this","push","59","module","exports","Error","73","__webpack_require__","83","__webpack_exports__","r","react","react_default","n","react_dom","react_dom_default","react_router_dom","react_router","SearchBooks","SearchBooks_default","regenerator","regenerator_default","asyncToGenerator","slicedToArray","Jumbotron","Container","CardColumns","Card","Button","deleteBook","bookId","token","fetch","concat","method","headers","authorization","classCallCheck","createClass","jwt_decode_esm","auth","AuthService","Object","key","value","getToken","isTokenExpired","exp","Date","now","err","localStorage","getItem","idToken","setItem","window","location","assign","removeItem","removeBookId","savedBookIds","JSON","parse","updatedSavedBookIds","filter","savedBookId","stringify","jsx_runtime","pages_SavedBooks","_useState","_useState2","userData","setUserData","userDataLength","keys","length","handleDeleteBook","_ref","a","mark","_callee","response","updatedUser","wrap","_context","prev","next","loggedIn","abrupt","sent","ok","json","t0","console","error","stop","_x","apply","arguments","children","fluid","className","savedBooks","map","book","border","image","Img","src","alt","title","variant","Body","Title","authors","Text","description","onClick","Navbar","Nav","Modal","Tab","defineProperty","objectSpread2","Form","Alert","components_SignupForm","username","email","password","userFormData","setUserFormData","_useState3","validated","_useState5","_useState6","showAlert","setShowAlert","handleInputChange","event","_event$target","target","name","handleFormSubmit","_yield$response$json","user","preventDefault","currentTarget","checkValidity","stopPropagation","Content-Type","body","log","login","noValidate","onSubmit","dismissible","onClose","show","Group","Label","htmlFor","Control","type","placeholder","onChange","required","Feedback","disabled","components_LoginForm","components_Navbar","showModal","setShowModal","bg","expand","Brand","as","to","Toggle","aria-controls","Collapse","id","Link","logout","size","onHide","aria-labelledby","defaultActiveKey","Header","closeButton","Item","eventKey","Content","Pane","handleModalClose","request","operation","t","setContext","uri","src_App","exact","path","component","render","StrictMode","document","getElementById"],"mappings":"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"},"input":"(this[\"webpackJsonpclient\"] = this[\"webpackJsonpclient\"] || []).push([[0],{\n\n/***/ 59:\n/***/ (function(module, exports) {\n\nthrow new Error(\"Module build failed (from ./node_modules/babel-loader/lib/index.js):\\nSyntaxError: C:\\\\Users\\\\emily\\\\OneDrive\\\\Desktop\\\\bootcamp\\\\challenges\\\\book-search-engine\\\\client\\\\src\\\\pages\\\\SearchBooks.js: Identifier 'searchGoogleBooks' has already been declared (16:9)\\n\\n\\u001b[0m \\u001b[90m 14 |\\u001b[39m\\u001b[0m\\n\\u001b[0m \\u001b[90m 15 |\\u001b[39m \\u001b[36mimport\\u001b[39m { saveBookIds\\u001b[33m,\\u001b[39m getSavedBookIds } \\u001b[36mfrom\\u001b[39m \\u001b[32m\\\"../utils/localStorage\\\"\\u001b[39m\\u001b[33m;\\u001b[39m\\u001b[0m\\n\\u001b[0m\\u001b[31m\\u001b[1m>\\u001b[22m\\u001b[39m\\u001b[90m 16 |\\u001b[39m \\u001b[36mimport\\u001b[39m { searchGoogleBooks } \\u001b[36mfrom\\u001b[39m \\u001b[32m\\\"../utils/API.js\\\"\\u001b[39m\\u001b[33m;\\u001b[39m\\u001b[0m\\n\\u001b[0m \\u001b[90m    |\\u001b[39m          \\u001b[31m\\u001b[1m^\\u001b[22m\\u001b[39m\\u001b[0m\\n\\u001b[0m \\u001b[90m 17 |\\u001b[39m \\u001b[36mimport\\u001b[39m { useMutation } \\u001b[36mfrom\\u001b[39m \\u001b[32m\\\"@apollo/react-hooks\\\"\\u001b[39m\\u001b[33m;\\u001b[39m\\u001b[0m\\n\\u001b[0m \\u001b[90m 18 |\\u001b[39m\\u001b[0m\\n\\u001b[0m \\u001b[90m 19 |\\u001b[39m \\u001b[36mconst\\u001b[39m \\u001b[33mSearchBooks\\u001b[39m \\u001b[33m=\\u001b[39m () \\u001b[33m=>\\u001b[39m {\\u001b[0m\\n    at _temp._raise (C:\\\\Users\\\\emily\\\\OneDrive\\\\Desktop\\\\bootcamp\\\\challenges\\\\book-search-engine\\\\client\\\\node_modules\\\\@babel\\\\parser\\\\lib\\\\index.js:776:17)\\n    at _temp.raiseWithData (C:\\\\Users\\\\emily\\\\OneDrive\\\\Desktop\\\\bootcamp\\\\challenges\\\\book-search-engine\\\\client\\\\node_modules\\\\@babel\\\\parser\\\\lib\\\\index.js:769:17)\\n    at _temp.raise (C:\\\\Users\\\\emily\\\\OneDrive\\\\Desktop\\\\bootcamp\\\\challenges\\\\book-search-engine\\\\client\\\\node_modules\\\\@babel\\\\parser\\\\lib\\\\index.js:737:17)\\n    at FlowScopeHandler.checkRedeclarationInScope (C:\\\\Users\\\\emily\\\\OneDrive\\\\Desktop\\\\bootcamp\\\\challenges\\\\book-search-engine\\\\client\\\\node_modules\\\\@babel\\\\parser\\\\lib\\\\index.js:1453:12)\\n    at FlowScopeHandler.declareName (C:\\\\Users\\\\emily\\\\OneDrive\\\\Desktop\\\\bootcamp\\\\challenges\\\\book-search-engine\\\\client\\\\node_modules\\\\@babel\\\\parser\\\\lib\\\\index.js:1419:12)\\n    at FlowScopeHandler.declareName (C:\\\\Users\\\\emily\\\\OneDrive\\\\Desktop\\\\bootcamp\\\\challenges\\\\book-search-engine\\\\client\\\\node_modules\\\\@babel\\\\parser\\\\lib\\\\index.js:1526:11)\\n    at _temp.checkLVal (C:\\\\Users\\\\emily\\\\OneDrive\\\\Desktop\\\\bootcamp\\\\challenges\\\\book-search-engine\\\\client\\\\node_modules\\\\@babel\\\\parser\\\\lib\\\\index.js:10260:24)\\n    at _temp.checkLVal (C:\\\\Users\\\\emily\\\\OneDrive\\\\Desktop\\\\bootcamp\\\\challenges\\\\book-search-engine\\\\client\\\\node_modules\\\\@babel\\\\parser\\\\lib\\\\index.js:3364:22)\\n    at _temp.parseImportSpecifier (C:\\\\Users\\\\emily\\\\OneDrive\\\\Desktop\\\\bootcamp\\\\challenges\\\\book-search-engine\\\\client\\\\node_modules\\\\@babel\\\\parser\\\\lib\\\\index.js:3651:12)\\n    at _temp.parseNamedImportSpecifiers (C:\\\\Users\\\\emily\\\\OneDrive\\\\Desktop\\\\bootcamp\\\\challenges\\\\book-search-engine\\\\client\\\\node_modules\\\\@babel\\\\parser\\\\lib\\\\index.js:13843:12)\\n    at _temp.parseImport (C:\\\\Users\\\\emily\\\\OneDrive\\\\Desktop\\\\bootcamp\\\\challenges\\\\book-search-engine\\\\client\\\\node_modules\\\\@babel\\\\parser\\\\lib\\\\index.js:13674:39)\\n    at _temp.parseStatementContent (C:\\\\Users\\\\emily\\\\OneDrive\\\\Desktop\\\\bootcamp\\\\challenges\\\\book-search-engine\\\\client\\\\node_modules\\\\@babel\\\\parser\\\\lib\\\\index.js:12359:27)\\n    at _temp.parseStatement (C:\\\\Users\\\\emily\\\\OneDrive\\\\Desktop\\\\bootcamp\\\\challenges\\\\book-search-engine\\\\client\\\\node_modules\\\\@babel\\\\parser\\\\lib\\\\index.js:12259:17)\\n    at _temp.parseStatement (C:\\\\Users\\\\emily\\\\OneDrive\\\\Desktop\\\\bootcamp\\\\challenges\\\\book-search-engine\\\\client\\\\node_modules\\\\@babel\\\\parser\\\\lib\\\\index.js:2957:26)\\n    at _temp.parseBlockOrModuleBlockBody (C:\\\\Users\\\\emily\\\\OneDrive\\\\Desktop\\\\bootcamp\\\\challenges\\\\book-search-engine\\\\client\\\\node_modules\\\\@babel\\\\parser\\\\lib\\\\index.js:12845:25)\\n    at _temp.parseBlockBody (C:\\\\Users\\\\emily\\\\OneDrive\\\\Desktop\\\\bootcamp\\\\challenges\\\\book-search-engine\\\\client\\\\node_modules\\\\@babel\\\\parser\\\\lib\\\\index.js:12836:10)\");\n\n/***/ }),\n\n/***/ 73:\n/***/ (function(module, exports, __webpack_require__) {\n\n// extracted by mini-css-extract-plugin\n\n/***/ }),\n\n/***/ 83:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n// ESM COMPAT FLAG\n__webpack_require__.r(__webpack_exports__);\n\n// EXTERNAL MODULE: ./node_modules/react/index.js\nvar react = __webpack_require__(0);\nvar react_default = /*#__PURE__*/__webpack_require__.n(react);\n\n// EXTERNAL MODULE: ./node_modules/react-dom/index.js\nvar react_dom = __webpack_require__(27);\nvar react_dom_default = /*#__PURE__*/__webpack_require__.n(react_dom);\n\n// EXTERNAL MODULE: ./node_modules/bootstrap/dist/css/bootstrap.min.css\nvar bootstrap_min = __webpack_require__(72);\n\n// EXTERNAL MODULE: ./src/index.css\nvar src = __webpack_require__(73);\n\n// EXTERNAL MODULE: ./node_modules/react-router-dom/esm/react-router-dom.js\nvar react_router_dom = __webpack_require__(37);\n\n// EXTERNAL MODULE: ./node_modules/react-router/esm/react-router.js\nvar react_router = __webpack_require__(11);\n\n// EXTERNAL MODULE: ./src/pages/SearchBooks.js\nvar SearchBooks = __webpack_require__(59);\nvar SearchBooks_default = /*#__PURE__*/__webpack_require__.n(SearchBooks);\n\n// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator/index.js\nvar regenerator = __webpack_require__(22);\nvar regenerator_default = /*#__PURE__*/__webpack_require__.n(regenerator);\n\n// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\nvar asyncToGenerator = __webpack_require__(32);\n\n// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js + 5 modules\nvar slicedToArray = __webpack_require__(17);\n\n// EXTERNAL MODULE: ./node_modules/react-bootstrap/esm/Jumbotron.js\nvar Jumbotron = __webpack_require__(87);\n\n// EXTERNAL MODULE: ./node_modules/react-bootstrap/esm/Container.js\nvar Container = __webpack_require__(88);\n\n// EXTERNAL MODULE: ./node_modules/react-bootstrap/esm/CardColumns.js\nvar CardColumns = __webpack_require__(89);\n\n// EXTERNAL MODULE: ./node_modules/react-bootstrap/esm/Card.js + 1 modules\nvar Card = __webpack_require__(98);\n\n// EXTERNAL MODULE: ./node_modules/react-bootstrap/esm/Button.js\nvar Button = __webpack_require__(90);\n\n// CONCATENATED MODULE: ./src/utils/API.js\n// route to get logged in user's info (needs the token)\nvar getMe=function getMe(token){return fetch(\"/api/users/me\",{headers:{\"Content-Type\":\"application/json\",authorization:\"Bearer \".concat(token)}});};var createUser=function createUser(userData){return fetch(\"/api/users\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify(userData)});};var loginUser=function loginUser(userData){return fetch(\"/api/users/login\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify(userData)});};// save book data for a logged in user\nvar saveBook=function saveBook(bookData,token){return fetch(\"/api/users\",{method:\"PUT\",headers:{\"Content-Type\":\"application/json\",authorization:\"Bearer \".concat(token)},body:JSON.stringify(bookData)});};// remove saved book data for a logged in user\nvar deleteBook=function deleteBook(bookId,token){return fetch(\"/api/users/books/\".concat(bookId),{method:\"DELETE\",headers:{authorization:\"Bearer \".concat(token)}});};// make a search to google books api\n// https://www.googleapis.com/books/v1/volumes?q=harry+potter\nvar searchGoogleBooks=function searchGoogleBooks(query){return fetch(\"https://www.googleapis.com/books/v1/volumes?q=\".concat(query));};\n// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\nvar classCallCheck = __webpack_require__(60);\n\n// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass.js\nvar createClass = __webpack_require__(61);\n\n// EXTERNAL MODULE: ./node_modules/jwt-decode/build/jwt-decode.esm.js\nvar jwt_decode_esm = __webpack_require__(52);\n\n// CONCATENATED MODULE: ./src/utils/auth.js\n// use this to decode a token and get the user's information out of it\n// create a new class to instantiate for a user\nvar auth_AuthService=/*#__PURE__*/function(){function AuthService(){Object(classCallCheck[\"a\" /* default */])(this,AuthService);}Object(createClass[\"a\" /* default */])(AuthService,[{key:\"getProfile\",value:// get user data\nfunction getProfile(){return Object(jwt_decode_esm[\"a\" /* default */])(this.getToken());}// check if user's logged in\n},{key:\"loggedIn\",value:function loggedIn(){// Checks if there is a saved token and it's still valid\nvar token=this.getToken();return!!token&&!this.isTokenExpired(token);// handwaiving here\n}// check if token is expired\n},{key:\"isTokenExpired\",value:function isTokenExpired(token){try{var decoded=Object(jwt_decode_esm[\"a\" /* default */])(token);if(decoded.exp<Date.now()/1000){return true;}else return false;}catch(err){return false;}}},{key:\"getToken\",value:function getToken(){// Retrieves the user token from localStorage\nreturn localStorage.getItem(\"id_token\");}},{key:\"login\",value:function login(idToken){// Saves user token to localStorage\nlocalStorage.setItem(\"id_token\",idToken);window.location.assign(\"/\");}},{key:\"logout\",value:function logout(){// Clear user token and profile data from localStorage\nlocalStorage.removeItem(\"id_token\");// this will reload the page and reset the state of the application\nwindow.location.assign(\"/\");}}]);return AuthService;}();/* harmony default export */ var auth = (new auth_AuthService());\n// CONCATENATED MODULE: ./src/utils/localStorage.js\nvar getSavedBookIds=function getSavedBookIds(){var savedBookIds=localStorage.getItem(\"saved_books\")?JSON.parse(localStorage.getItem(\"saved_books\")):[];return savedBookIds;};var saveBookIds=function saveBookIds(bookIdArr){if(bookIdArr.length){localStorage.setItem(\"saved_books\",JSON.stringify(bookIdArr));}else{localStorage.removeItem(\"saved_books\");}};var removeBookId=function removeBookId(bookId){var savedBookIds=localStorage.getItem(\"saved_books\")?JSON.parse(localStorage.getItem(\"saved_books\")):null;if(!savedBookIds){return false;}var updatedSavedBookIds=savedBookIds===null||savedBookIds===void 0?void 0:savedBookIds.filter(function(savedBookId){return savedBookId!==bookId;});localStorage.setItem(\"saved_books\",JSON.stringify(updatedSavedBookIds));return true;};\n// EXTERNAL MODULE: ./node_modules/react/jsx-runtime.js\nvar jsx_runtime = __webpack_require__(2);\n\n// CONCATENATED MODULE: ./src/pages/SavedBooks.js\nvar SavedBooks_SavedBooks=function SavedBooks(){var _useState=Object(react[\"useState\"])({}),_useState2=Object(slicedToArray[\"a\" /* default */])(_useState,2),userData=_useState2[0],setUserData=_useState2[1];// use this to determine if `useEffect()` hook needs to run again\nvar userDataLength=Object.keys(userData).length;// create function that accepts the book's mongo _id value as param and deletes the book from the database\nvar handleDeleteBook=/*#__PURE__*/function(){var _ref=Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee(bookId){var token,response,updatedUser;return regenerator_default.a.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:token=auth.loggedIn()?auth.getToken():null;if(token){_context.next=3;break;}return _context.abrupt(\"return\",false);case 3:_context.prev=3;_context.next=6;return deleteBook(bookId,token);case 6:response=_context.sent;if(response.ok){_context.next=9;break;}throw new Error(\"something went wrong!\");case 9:_context.next=11;return response.json();case 11:updatedUser=_context.sent;setUserData(updatedUser);// upon success, remove book's id from localStorage\nremoveBookId(bookId);_context.next=19;break;case 16:_context.prev=16;_context.t0=_context[\"catch\"](3);console.error(_context.t0);case 19:case\"end\":return _context.stop();}}},_callee,null,[[3,16]]);}));return function handleDeleteBook(_x){return _ref.apply(this,arguments);};}();// if data isn't here yet, say so\nif(!userDataLength){return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"h2\",{children:\"LOADING...\"});}return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(jsx_runtime[\"Fragment\"],{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Jumbotron[\"a\" /* default */],{fluid:true,className:\"text-light bg-dark\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Container[\"a\" /* default */],{children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"h1\",{children:\"Viewing saved books!\"})})}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Container[\"a\" /* default */],{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"h2\",{children:userData.savedBooks.length?\"Viewing \".concat(userData.savedBooks.length,\" saved \").concat(userData.savedBooks.length===1?\"book\":\"books\",\":\"):\"You have no saved books!\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(CardColumns[\"a\" /* default */],{children:userData.savedBooks.map(function(book){return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Card[\"a\" /* default */],{border:\"dark\",children:[book.image?/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Card[\"a\" /* default */].Img,{src:book.image,alt:\"The cover for \".concat(book.title),variant:\"top\"}):null,/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Card[\"a\" /* default */].Body,{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Card[\"a\" /* default */].Title,{children:book.title}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"p\",{className:\"small\",children:[\"Authors: \",book.authors]}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Card[\"a\" /* default */].Text,{children:book.description}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button[\"a\" /* default */],{className:\"btn-block btn-danger\",onClick:function onClick(){return handleDeleteBook(book.bookId);},children:\"Delete this Book!\"})]})]},book.bookId);})})]})]});};/* harmony default export */ var pages_SavedBooks = (SavedBooks_SavedBooks);\n// EXTERNAL MODULE: ./node_modules/react-bootstrap/esm/Navbar.js + 4 modules\nvar Navbar = __webpack_require__(95);\n\n// EXTERNAL MODULE: ./node_modules/react-bootstrap/esm/Nav.js + 7 modules\nvar Nav = __webpack_require__(94);\n\n// EXTERNAL MODULE: ./node_modules/react-bootstrap/esm/Modal.js + 22 modules\nvar Modal = __webpack_require__(92);\n\n// EXTERNAL MODULE: ./node_modules/react-bootstrap/esm/Tab.js + 3 modules\nvar Tab = __webpack_require__(96);\n\n// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty.js\nvar defineProperty = __webpack_require__(34);\n\n// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\nvar objectSpread2 = __webpack_require__(35);\n\n// EXTERNAL MODULE: ./node_modules/react-bootstrap/esm/Form.js + 14 modules\nvar Form = __webpack_require__(93);\n\n// EXTERNAL MODULE: ./node_modules/react-bootstrap/esm/Alert.js\nvar Alert = __webpack_require__(91);\n\n// CONCATENATED MODULE: ./src/components/SignupForm.js\nvar SignupForm_SignupForm=function SignupForm(){// set initial form state\nvar _useState=Object(react[\"useState\"])({username:\"\",email:\"\",password:\"\"}),_useState2=Object(slicedToArray[\"a\" /* default */])(_useState,2),userFormData=_useState2[0],setUserFormData=_useState2[1];// set state for form validation\nvar _useState3=Object(react[\"useState\"])(false),_useState4=Object(slicedToArray[\"a\" /* default */])(_useState3,1),validated=_useState4[0];// set state for alert\nvar _useState5=Object(react[\"useState\"])(false),_useState6=Object(slicedToArray[\"a\" /* default */])(_useState5,2),showAlert=_useState6[0],setShowAlert=_useState6[1];var handleInputChange=function handleInputChange(event){var _event$target=event.target,name=_event$target.name,value=_event$target.value;setUserFormData(Object(objectSpread2[\"a\" /* default */])(Object(objectSpread2[\"a\" /* default */])({},userFormData),{},Object(defineProperty[\"a\" /* default */])({},name,value)));};var handleFormSubmit=/*#__PURE__*/function(){var _ref=Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee(event){var form,response,_yield$response$json,token,user;return regenerator_default.a.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:event.preventDefault();// check if form has everything (as per react-bootstrap docs)\nform=event.currentTarget;if(form.checkValidity()===false){event.preventDefault();event.stopPropagation();}_context.prev=3;_context.next=6;return createUser(userFormData);case 6:response=_context.sent;if(response.ok){_context.next=9;break;}throw new Error(\"something went wrong!\");case 9:_context.next=11;return response.json();case 11:_yield$response$json=_context.sent;token=_yield$response$json.token;user=_yield$response$json.user;console.log(user);auth.login(token);_context.next=22;break;case 18:_context.prev=18;_context.t0=_context[\"catch\"](3);console.error(_context.t0);setShowAlert(true);case 22:setUserFormData({username:\"\",email:\"\",password:\"\"});case 23:case\"end\":return _context.stop();}}},_callee,null,[[3,18]]);}));return function handleFormSubmit(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(jsx_runtime[\"Fragment\"],{children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Form[\"a\" /* default */],{noValidate:true,validated:validated,onSubmit:handleFormSubmit,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Alert[\"a\" /* default */],{dismissible:true,onClose:function onClose(){return setShowAlert(false);},show:showAlert,variant:\"danger\",children:\"Something went wrong with your signup!\"}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Form[\"a\" /* default */].Group,{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Form[\"a\" /* default */].Label,{htmlFor:\"username\",children:\"Username\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Form[\"a\" /* default */].Control,{type:\"text\",placeholder:\"Your username\",name:\"username\",onChange:handleInputChange,value:userFormData.username,required:true}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Form[\"a\" /* default */].Control.Feedback,{type:\"invalid\",children:\"Username is required!\"})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Form[\"a\" /* default */].Group,{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Form[\"a\" /* default */].Label,{htmlFor:\"email\",children:\"Email\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Form[\"a\" /* default */].Control,{type:\"email\",placeholder:\"Your email address\",name:\"email\",onChange:handleInputChange,value:userFormData.email,required:true}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Form[\"a\" /* default */].Control.Feedback,{type:\"invalid\",children:\"Email is required!\"})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Form[\"a\" /* default */].Group,{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Form[\"a\" /* default */].Label,{htmlFor:\"password\",children:\"Password\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Form[\"a\" /* default */].Control,{type:\"password\",placeholder:\"Your password\",name:\"password\",onChange:handleInputChange,value:userFormData.password,required:true}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Form[\"a\" /* default */].Control.Feedback,{type:\"invalid\",children:\"Password is required!\"})]}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button[\"a\" /* default */],{disabled:!(userFormData.username&&userFormData.email&&userFormData.password),type:\"submit\",variant:\"success\",children:\"Submit\"})]})});};/* harmony default export */ var components_SignupForm = (SignupForm_SignupForm);\n// CONCATENATED MODULE: ./src/components/LoginForm.js\n// see SignupForm.js for comments\nvar LoginForm_LoginForm=function LoginForm(){var _useState=Object(react[\"useState\"])({email:\"\",password:\"\"}),_useState2=Object(slicedToArray[\"a\" /* default */])(_useState,2),userFormData=_useState2[0],setUserFormData=_useState2[1];var _useState3=Object(react[\"useState\"])(false),_useState4=Object(slicedToArray[\"a\" /* default */])(_useState3,1),validated=_useState4[0];var _useState5=Object(react[\"useState\"])(false),_useState6=Object(slicedToArray[\"a\" /* default */])(_useState5,2),showAlert=_useState6[0],setShowAlert=_useState6[1];var handleInputChange=function handleInputChange(event){var _event$target=event.target,name=_event$target.name,value=_event$target.value;setUserFormData(Object(objectSpread2[\"a\" /* default */])(Object(objectSpread2[\"a\" /* default */])({},userFormData),{},Object(defineProperty[\"a\" /* default */])({},name,value)));};var handleFormSubmit=/*#__PURE__*/function(){var _ref=Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee(event){var form,response,_yield$response$json,token,user;return regenerator_default.a.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:event.preventDefault();// check if form has everything (as per react-bootstrap docs)\nform=event.currentTarget;if(form.checkValidity()===false){event.preventDefault();event.stopPropagation();}_context.prev=3;_context.next=6;return loginUser(userFormData);case 6:response=_context.sent;if(response.ok){_context.next=9;break;}throw new Error(\"something went wrong!\");case 9:_context.next=11;return response.json();case 11:_yield$response$json=_context.sent;token=_yield$response$json.token;user=_yield$response$json.user;console.log(user);auth.login(token);_context.next=22;break;case 18:_context.prev=18;_context.t0=_context[\"catch\"](3);console.error(_context.t0);setShowAlert(true);case 22:setUserFormData({username:\"\",email:\"\",password:\"\"});case 23:case\"end\":return _context.stop();}}},_callee,null,[[3,18]]);}));return function handleFormSubmit(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(jsx_runtime[\"Fragment\"],{children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Form[\"a\" /* default */],{noValidate:true,validated:validated,onSubmit:handleFormSubmit,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Alert[\"a\" /* default */],{dismissible:true,onClose:function onClose(){return setShowAlert(false);},show:showAlert,variant:\"danger\",children:\"Something went wrong with your login credentials!\"}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Form[\"a\" /* default */].Group,{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Form[\"a\" /* default */].Label,{htmlFor:\"email\",children:\"Email\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Form[\"a\" /* default */].Control,{type:\"text\",placeholder:\"Your email\",name:\"email\",onChange:handleInputChange,value:userFormData.email,required:true}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Form[\"a\" /* default */].Control.Feedback,{type:\"invalid\",children:\"Email is required!\"})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Form[\"a\" /* default */].Group,{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Form[\"a\" /* default */].Label,{htmlFor:\"password\",children:\"Password\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Form[\"a\" /* default */].Control,{type:\"password\",placeholder:\"Your password\",name:\"password\",onChange:handleInputChange,value:userFormData.password,required:true}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Form[\"a\" /* default */].Control.Feedback,{type:\"invalid\",children:\"Password is required!\"})]}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button[\"a\" /* default */],{disabled:!(userFormData.email&&userFormData.password),type:\"submit\",variant:\"success\",children:\"Submit\"})]})});};/* harmony default export */ var components_LoginForm = (LoginForm_LoginForm);\n// CONCATENATED MODULE: ./src/components/Navbar.js\nvar Navbar_AppNavbar=function AppNavbar(){// set modal display state\nvar _useState=Object(react[\"useState\"])(false),_useState2=Object(slicedToArray[\"a\" /* default */])(_useState,2),showModal=_useState2[0],setShowModal=_useState2[1];return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(jsx_runtime[\"Fragment\"],{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Navbar[\"a\" /* default */],{bg:\"dark\",variant:\"dark\",expand:\"lg\",children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Container[\"a\" /* default */],{fluid:true,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Navbar[\"a\" /* default */].Brand,{as:react_router_dom[\"b\" /* Link */],to:\"/\",children:\"Google Books Search\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Navbar[\"a\" /* default */].Toggle,{\"aria-controls\":\"navbar\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Navbar[\"a\" /* default */].Collapse,{id:\"navbar\",children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Nav[\"a\" /* default */],{className:\"ml-auto\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Nav[\"a\" /* default */].Link,{as:react_router_dom[\"b\" /* Link */],to:\"/\",children:\"Search For Books\"}),auth.loggedIn()?/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(jsx_runtime[\"Fragment\"],{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Nav[\"a\" /* default */].Link,{as:react_router_dom[\"b\" /* Link */],to:\"/saved\",children:\"See Your Books\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Nav[\"a\" /* default */].Link,{onClick:auth.logout,children:\"Logout\"})]}):/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Nav[\"a\" /* default */].Link,{onClick:function onClick(){return setShowModal(true);},children:\"Login/Sign Up\"})]})})]})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Modal[\"a\" /* default */],{size:\"lg\",show:showModal,onHide:function onHide(){return setShowModal(false);},\"aria-labelledby\":\"signup-modal\",children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Tab[\"a\" /* default */].Container,{defaultActiveKey:\"login\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Modal[\"a\" /* default */].Header,{closeButton:true,children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Modal[\"a\" /* default */].Title,{id:\"signup-modal\",children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Nav[\"a\" /* default */],{variant:\"pills\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Nav[\"a\" /* default */].Item,{children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Nav[\"a\" /* default */].Link,{eventKey:\"login\",children:\"Login\"})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Nav[\"a\" /* default */].Item,{children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Nav[\"a\" /* default */].Link,{eventKey:\"signup\",children:\"Sign Up\"})})]})})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Modal[\"a\" /* default */].Body,{children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Tab[\"a\" /* default */].Content,{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Tab[\"a\" /* default */].Pane,{eventKey:\"login\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(components_LoginForm,{handleModalClose:function handleModalClose(){return setShowModal(false);}})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Tab[\"a\" /* default */].Pane,{eventKey:\"signup\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(components_SignupForm,{handleModalClose:function handleModalClose(){return setShowModal(false);}})})]})})]})})]});};/* harmony default export */ var components_Navbar = (Navbar_AppNavbar);\n// EXTERNAL MODULE: ./node_modules/apollo-client/bundle.esm.js + 2 modules\nvar bundle_esm = __webpack_require__(97);\n\n// CONCATENATED MODULE: ./src/App.js\nvar client=new bundle_esm[\"a\" /* ApolloClient */]({request:function request(operation){var t=localStorage.getItem(\"id_token\");operation.setContext({headers:{authorization:t?\"Bearer \".concat(t):\"\"}});},uri:\"/graphql\"});function App(){return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react_router_dom[\"a\" /* BrowserRouter */],{children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(jsx_runtime[\"Fragment\"],{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(components_Navbar,{}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(react_router[\"c\" /* Switch */],{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react_router[\"a\" /* Route */],{exact:true,path:\"/\",component:SearchBooks_default.a}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react_router[\"a\" /* Route */],{exact:true,path:\"/saved\",component:pages_SavedBooks}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react_router[\"a\" /* Route */],{render:function render(){return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"h1\",{className:\"display-2\",children:\"Wrong page!\"});}})]})]})});}/* harmony default export */ var src_App = (App);\n// CONCATENATED MODULE: ./src/index.js\nreact_dom_default.a.render(/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react_default.a.StrictMode,{children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(src_App,{})}),document.getElementById(\"root\"));\n\n/***/ })\n\n},[[83,1,2]]]);","inputSourceMap":{"version":3,"sources":["C:\\Users\\emily\\OneDrive\\Desktop\\bootcamp\\challenges\\book-search-engine\\client\\node_modules\\mini-css-extract-plugin\\dist\\loader.js??ref--5-oneOf-4-0!C:\\Users\\emily\\OneDrive\\Desktop\\bootcamp\\challenges\\book-search-engine\\client\\node_modules\\css-loader\\dist\\cjs.js??ref--5-oneOf-4-1!C:\\Users\\emily\\OneDrive\\Desktop\\bootcamp\\challenges\\book-search-engine\\client\\node_modules\\postcss-loader\\src\\index.js??postcss!C:\\Users\\emily\\OneDrive\\Desktop\\bootcamp\\challenges\\book-search-engine\\client\\src\\index.css","C:/Users/emily/OneDrive/Desktop/bootcamp/challenges/book-search-engine/client/src/utils/API.js","C:/Users/emily/OneDrive/Desktop/bootcamp/challenges/book-search-engine/client/src/utils/auth.js","C:/Users/emily/OneDrive/Desktop/bootcamp/challenges/book-search-engine/client/src/utils/localStorage.js","C:/Users/emily/OneDrive/Desktop/bootcamp/challenges/book-search-engine/client/src/pages/SavedBooks.js","C:/Users/emily/OneDrive/Desktop/bootcamp/challenges/book-search-engine/client/src/components/SignupForm.js","C:/Users/emily/OneDrive/Desktop/bootcamp/challenges/book-search-engine/client/src/components/LoginForm.js","C:/Users/emily/OneDrive/Desktop/bootcamp/challenges/book-search-engine/client/src/components/Navbar.js","C:/Users/emily/OneDrive/Desktop/bootcamp/challenges/book-search-engine/client/src/App.js","C:/Users/emily/OneDrive/Desktop/bootcamp/challenges/book-search-engine/client/src/index.js"],"names":["getMe","token","fetch","headers","authorization","createUser","userData","method","body","JSON","stringify","loginUser","saveBook","bookData","deleteBook","bookId","searchGoogleBooks","query","AuthService","decode","getToken","isTokenExpired","decoded","exp","Date","now","err","localStorage","getItem","idToken","setItem","window","location","assign","removeItem","getSavedBookIds","savedBookIds","parse","saveBookIds","bookIdArr","length","removeBookId","updatedSavedBookIds","filter","savedBookId","SavedBooks","useState","setUserData","userDataLength","Object","keys","handleDeleteBook","Auth","loggedIn","response","ok","Error","json","updatedUser","console","error","savedBooks","map","book","image","title","authors","description","SignupForm","username","email","password","userFormData","setUserFormData","validated","showAlert","setShowAlert","handleInputChange","event","target","name","value","handleFormSubmit","preventDefault","form","currentTarget","checkValidity","stopPropagation","user","log","login","LoginForm","AppNavbar","showModal","setShowModal","Link","logout","client","ApolloClient","request","operation","t","setContext","uri","App","SearchBooks","ReactDOM","render","document","getElementById"],"mappings":"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","file":"x","sourcesContent":["// extracted by mini-css-extract-plugin","// route to get logged in user's info (needs the token)\r\nexport const getMe = (token) => {\r\n  return fetch(\"/api/users/me\", {\r\n    headers: {\r\n      \"Content-Type\": \"application/json\",\r\n      authorization: `Bearer ${token}`,\r\n    },\r\n  });\r\n};\r\n\r\nexport const createUser = (userData) => {\r\n  return fetch(\"/api/users\", {\r\n    method: \"POST\",\r\n    headers: {\r\n      \"Content-Type\": \"application/json\",\r\n    },\r\n    body: JSON.stringify(userData),\r\n  });\r\n};\r\n\r\nexport const loginUser = (userData) => {\r\n  return fetch(\"/api/users/login\", {\r\n    method: \"POST\",\r\n    headers: {\r\n      \"Content-Type\": \"application/json\",\r\n    },\r\n    body: JSON.stringify(userData),\r\n  });\r\n};\r\n\r\n// save book data for a logged in user\r\nexport const saveBook = (bookData, token) => {\r\n  return fetch(\"/api/users\", {\r\n    method: \"PUT\",\r\n    headers: {\r\n      \"Content-Type\": \"application/json\",\r\n      authorization: `Bearer ${token}`,\r\n    },\r\n    body: JSON.stringify(bookData),\r\n  });\r\n};\r\n\r\n// remove saved book data for a logged in user\r\nexport const deleteBook = (bookId, token) => {\r\n  return fetch(`/api/users/books/${bookId}`, {\r\n    method: \"DELETE\",\r\n    headers: {\r\n      authorization: `Bearer ${token}`,\r\n    },\r\n  });\r\n};\r\n\r\n// make a search to google books api\r\n// https://www.googleapis.com/books/v1/volumes?q=harry+potter\r\nexport const searchGoogleBooks = (query) => {\r\n  return fetch(`https://www.googleapis.com/books/v1/volumes?q=${query}`);\r\n};\r\n","// use this to decode a token and get the user's information out of it\r\nimport decode from \"jwt-decode\";\r\n\r\n// create a new class to instantiate for a user\r\nclass AuthService {\r\n  // get user data\r\n  getProfile() {\r\n    return decode(this.getToken());\r\n  }\r\n\r\n  // check if user's logged in\r\n  loggedIn() {\r\n    // Checks if there is a saved token and it's still valid\r\n    const token = this.getToken();\r\n    return !!token && !this.isTokenExpired(token); // handwaiving here\r\n  }\r\n\r\n  // check if token is expired\r\n  isTokenExpired(token) {\r\n    try {\r\n      const decoded = decode(token);\r\n      if (decoded.exp < Date.now() / 1000) {\r\n        return true;\r\n      } else return false;\r\n    } catch (err) {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  getToken() {\r\n    // Retrieves the user token from localStorage\r\n    return localStorage.getItem(\"id_token\");\r\n  }\r\n\r\n  login(idToken) {\r\n    // Saves user token to localStorage\r\n    localStorage.setItem(\"id_token\", idToken);\r\n    window.location.assign(\"/\");\r\n  }\r\n\r\n  logout() {\r\n    // Clear user token and profile data from localStorage\r\n    localStorage.removeItem(\"id_token\");\r\n    // this will reload the page and reset the state of the application\r\n    window.location.assign(\"/\");\r\n  }\r\n}\r\n\r\nexport default new AuthService();\r\n","export const getSavedBookIds = () => {\r\n  const savedBookIds = localStorage.getItem(\"saved_books\")\r\n    ? JSON.parse(localStorage.getItem(\"saved_books\"))\r\n    : [];\r\n\r\n  return savedBookIds;\r\n};\r\n\r\nexport const saveBookIds = (bookIdArr) => {\r\n  if (bookIdArr.length) {\r\n    localStorage.setItem(\"saved_books\", JSON.stringify(bookIdArr));\r\n  } else {\r\n    localStorage.removeItem(\"saved_books\");\r\n  }\r\n};\r\n\r\nexport const removeBookId = (bookId) => {\r\n  const savedBookIds = localStorage.getItem(\"saved_books\")\r\n    ? JSON.parse(localStorage.getItem(\"saved_books\"))\r\n    : null;\r\n\r\n  if (!savedBookIds) {\r\n    return false;\r\n  }\r\n\r\n  const updatedSavedBookIds = savedBookIds?.filter(\r\n    (savedBookId) => savedBookId !== bookId\r\n  );\r\n  localStorage.setItem(\"saved_books\", JSON.stringify(updatedSavedBookIds));\r\n\r\n  return true;\r\n};\r\n","import React, { useState, useEffect } from \"react\";\r\nimport {\r\n  Jumbotron,\r\n  Container,\r\n  CardColumns,\r\n  Card,\r\n  Button,\r\n} from \"react-bootstrap\";\r\n\r\nimport { getMe, deleteBook } from \"../utils/API\";\r\nimport Auth from \"../utils/auth\";\r\nimport { removeBookId } from \"../utils/localStorage\";\r\n\r\nconst SavedBooks = () => {\r\n  const [userData, setUserData] = useState({});\r\n\r\n  // use this to determine if `useEffect()` hook needs to run again\r\n  const userDataLength = Object.keys(userData).length;\r\n\r\n  // create function that accepts the book's mongo _id value as param and deletes the book from the database\r\n  const handleDeleteBook = async (bookId) => {\r\n    const token = Auth.loggedIn() ? Auth.getToken() : null;\r\n\r\n    if (!token) {\r\n      return false;\r\n    }\r\n\r\n    try {\r\n      const response = await deleteBook(bookId, token);\r\n\r\n      if (!response.ok) {\r\n        throw new Error(\"something went wrong!\");\r\n      }\r\n\r\n      const updatedUser = await response.json();\r\n      setUserData(updatedUser);\r\n      // upon success, remove book's id from localStorage\r\n      removeBookId(bookId);\r\n    } catch (err) {\r\n      console.error(err);\r\n    }\r\n  };\r\n\r\n  // if data isn't here yet, say so\r\n  if (!userDataLength) {\r\n    return <h2>LOADING...</h2>;\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <Jumbotron fluid className=\"text-light bg-dark\">\r\n        <Container>\r\n          <h1>Viewing saved books!</h1>\r\n        </Container>\r\n      </Jumbotron>\r\n      <Container>\r\n        <h2>\r\n          {userData.savedBooks.length\r\n            ? `Viewing ${userData.savedBooks.length} saved ${\r\n                userData.savedBooks.length === 1 ? \"book\" : \"books\"\r\n              }:`\r\n            : \"You have no saved books!\"}\r\n        </h2>\r\n        <CardColumns>\r\n          {userData.savedBooks.map((book) => {\r\n            return (\r\n              <Card key={book.bookId} border=\"dark\">\r\n                {book.image ? (\r\n                  <Card.Img\r\n                    src={book.image}\r\n                    alt={`The cover for ${book.title}`}\r\n                    variant=\"top\"\r\n                  />\r\n                ) : null}\r\n                <Card.Body>\r\n                  <Card.Title>{book.title}</Card.Title>\r\n                  <p className=\"small\">Authors: {book.authors}</p>\r\n                  <Card.Text>{book.description}</Card.Text>\r\n                  <Button\r\n                    className=\"btn-block btn-danger\"\r\n                    onClick={() => handleDeleteBook(book.bookId)}\r\n                  >\r\n                    Delete this Book!\r\n                  </Button>\r\n                </Card.Body>\r\n              </Card>\r\n            );\r\n          })}\r\n        </CardColumns>\r\n      </Container>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default SavedBooks;\r\n","import React, { useState } from \"react\";\r\nimport { Form, Button, Alert } from \"react-bootstrap\";\r\n\r\nimport { createUser } from \"../utils/API\";\r\nimport Auth from \"../utils/auth\";\r\n\r\nconst SignupForm = () => {\r\n  // set initial form state\r\n  const [userFormData, setUserFormData] = useState({\r\n    username: \"\",\r\n    email: \"\",\r\n    password: \"\",\r\n  });\r\n  // set state for form validation\r\n  const [validated] = useState(false);\r\n  // set state for alert\r\n  const [showAlert, setShowAlert] = useState(false);\r\n\r\n  const handleInputChange = (event) => {\r\n    const { name, value } = event.target;\r\n    setUserFormData({ ...userFormData, [name]: value });\r\n  };\r\n\r\n  const handleFormSubmit = async (event) => {\r\n    event.preventDefault();\r\n\r\n    // check if form has everything (as per react-bootstrap docs)\r\n    const form = event.currentTarget;\r\n    if (form.checkValidity() === false) {\r\n      event.preventDefault();\r\n      event.stopPropagation();\r\n    }\r\n\r\n    try {\r\n      const response = await createUser(userFormData);\r\n\r\n      if (!response.ok) {\r\n        throw new Error(\"something went wrong!\");\r\n      }\r\n\r\n      const { token, user } = await response.json();\r\n      console.log(user);\r\n      Auth.login(token);\r\n    } catch (err) {\r\n      console.error(err);\r\n      setShowAlert(true);\r\n    }\r\n\r\n    setUserFormData({\r\n      username: \"\",\r\n      email: \"\",\r\n      password: \"\",\r\n    });\r\n  };\r\n\r\n  return (\r\n    <>\r\n      {/* This is needed for the validation functionality above */}\r\n      <Form noValidate validated={validated} onSubmit={handleFormSubmit}>\r\n        {/* show alert if server response is bad */}\r\n        <Alert\r\n          dismissible\r\n          onClose={() => setShowAlert(false)}\r\n          show={showAlert}\r\n          variant=\"danger\"\r\n        >\r\n          Something went wrong with your signup!\r\n        </Alert>\r\n\r\n        <Form.Group>\r\n          <Form.Label htmlFor=\"username\">Username</Form.Label>\r\n          <Form.Control\r\n            type=\"text\"\r\n            placeholder=\"Your username\"\r\n            name=\"username\"\r\n            onChange={handleInputChange}\r\n            value={userFormData.username}\r\n            required\r\n          />\r\n          <Form.Control.Feedback type=\"invalid\">\r\n            Username is required!\r\n          </Form.Control.Feedback>\r\n        </Form.Group>\r\n\r\n        <Form.Group>\r\n          <Form.Label htmlFor=\"email\">Email</Form.Label>\r\n          <Form.Control\r\n            type=\"email\"\r\n            placeholder=\"Your email address\"\r\n            name=\"email\"\r\n            onChange={handleInputChange}\r\n            value={userFormData.email}\r\n            required\r\n          />\r\n          <Form.Control.Feedback type=\"invalid\">\r\n            Email is required!\r\n          </Form.Control.Feedback>\r\n        </Form.Group>\r\n\r\n        <Form.Group>\r\n          <Form.Label htmlFor=\"password\">Password</Form.Label>\r\n          <Form.Control\r\n            type=\"password\"\r\n            placeholder=\"Your password\"\r\n            name=\"password\"\r\n            onChange={handleInputChange}\r\n            value={userFormData.password}\r\n            required\r\n          />\r\n          <Form.Control.Feedback type=\"invalid\">\r\n            Password is required!\r\n          </Form.Control.Feedback>\r\n        </Form.Group>\r\n        <Button\r\n          disabled={\r\n            !(\r\n              userFormData.username &&\r\n              userFormData.email &&\r\n              userFormData.password\r\n            )\r\n          }\r\n          type=\"submit\"\r\n          variant=\"success\"\r\n        >\r\n          Submit\r\n        </Button>\r\n      </Form>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default SignupForm;\r\n","// see SignupForm.js for comments\r\nimport React, { useState } from \"react\";\r\nimport { Form, Button, Alert } from \"react-bootstrap\";\r\n\r\nimport { loginUser } from \"../utils/API\";\r\nimport Auth from \"../utils/auth\";\r\n\r\nconst LoginForm = () => {\r\n  const [userFormData, setUserFormData] = useState({ email: \"\", password: \"\" });\r\n  const [validated] = useState(false);\r\n  const [showAlert, setShowAlert] = useState(false);\r\n\r\n  const handleInputChange = (event) => {\r\n    const { name, value } = event.target;\r\n    setUserFormData({ ...userFormData, [name]: value });\r\n  };\r\n\r\n  const handleFormSubmit = async (event) => {\r\n    event.preventDefault();\r\n\r\n    // check if form has everything (as per react-bootstrap docs)\r\n    const form = event.currentTarget;\r\n    if (form.checkValidity() === false) {\r\n      event.preventDefault();\r\n      event.stopPropagation();\r\n    }\r\n\r\n    try {\r\n      const response = await loginUser(userFormData);\r\n\r\n      if (!response.ok) {\r\n        throw new Error(\"something went wrong!\");\r\n      }\r\n\r\n      const { token, user } = await response.json();\r\n      console.log(user);\r\n      Auth.login(token);\r\n    } catch (err) {\r\n      console.error(err);\r\n      setShowAlert(true);\r\n    }\r\n\r\n    setUserFormData({\r\n      username: \"\",\r\n      email: \"\",\r\n      password: \"\",\r\n    });\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Form noValidate validated={validated} onSubmit={handleFormSubmit}>\r\n        <Alert\r\n          dismissible\r\n          onClose={() => setShowAlert(false)}\r\n          show={showAlert}\r\n          variant=\"danger\"\r\n        >\r\n          Something went wrong with your login credentials!\r\n        </Alert>\r\n        <Form.Group>\r\n          <Form.Label htmlFor=\"email\">Email</Form.Label>\r\n          <Form.Control\r\n            type=\"text\"\r\n            placeholder=\"Your email\"\r\n            name=\"email\"\r\n            onChange={handleInputChange}\r\n            value={userFormData.email}\r\n            required\r\n          />\r\n          <Form.Control.Feedback type=\"invalid\">\r\n            Email is required!\r\n          </Form.Control.Feedback>\r\n        </Form.Group>\r\n\r\n        <Form.Group>\r\n          <Form.Label htmlFor=\"password\">Password</Form.Label>\r\n          <Form.Control\r\n            type=\"password\"\r\n            placeholder=\"Your password\"\r\n            name=\"password\"\r\n            onChange={handleInputChange}\r\n            value={userFormData.password}\r\n            required\r\n          />\r\n          <Form.Control.Feedback type=\"invalid\">\r\n            Password is required!\r\n          </Form.Control.Feedback>\r\n        </Form.Group>\r\n        <Button\r\n          disabled={!(userFormData.email && userFormData.password)}\r\n          type=\"submit\"\r\n          variant=\"success\"\r\n        >\r\n          Submit\r\n        </Button>\r\n      </Form>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default LoginForm;\r\n","import React, { useState } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { Navbar, Nav, Container, Modal, Tab } from \"react-bootstrap\";\r\nimport SignUpForm from \"./SignupForm\";\r\nimport LoginForm from \"./LoginForm\";\r\n\r\nimport Auth from \"../utils/auth\";\r\n\r\nconst AppNavbar = () => {\r\n  // set modal display state\r\n  const [showModal, setShowModal] = useState(false);\r\n\r\n  return (\r\n    <>\r\n      <Navbar bg=\"dark\" variant=\"dark\" expand=\"lg\">\r\n        <Container fluid>\r\n          <Navbar.Brand as={Link} to=\"/\">\r\n            Google Books Search\r\n          </Navbar.Brand>\r\n          <Navbar.Toggle aria-controls=\"navbar\" />\r\n          <Navbar.Collapse id=\"navbar\">\r\n            <Nav className=\"ml-auto\">\r\n              <Nav.Link as={Link} to=\"/\">\r\n                Search For Books\r\n              </Nav.Link>\r\n              {/* if user is logged in show saved books and logout */}\r\n              {Auth.loggedIn() ? (\r\n                <>\r\n                  <Nav.Link as={Link} to=\"/saved\">\r\n                    See Your Books\r\n                  </Nav.Link>\r\n                  <Nav.Link onClick={Auth.logout}>Logout</Nav.Link>\r\n                </>\r\n              ) : (\r\n                <Nav.Link onClick={() => setShowModal(true)}>\r\n                  Login/Sign Up\r\n                </Nav.Link>\r\n              )}\r\n            </Nav>\r\n          </Navbar.Collapse>\r\n        </Container>\r\n      </Navbar>\r\n      {/* set modal data up */}\r\n      <Modal\r\n        size=\"lg\"\r\n        show={showModal}\r\n        onHide={() => setShowModal(false)}\r\n        aria-labelledby=\"signup-modal\"\r\n      >\r\n        {/* tab container to do either signup or login component */}\r\n        <Tab.Container defaultActiveKey=\"login\">\r\n          <Modal.Header closeButton>\r\n            <Modal.Title id=\"signup-modal\">\r\n              <Nav variant=\"pills\">\r\n                <Nav.Item>\r\n                  <Nav.Link eventKey=\"login\">Login</Nav.Link>\r\n                </Nav.Item>\r\n                <Nav.Item>\r\n                  <Nav.Link eventKey=\"signup\">Sign Up</Nav.Link>\r\n                </Nav.Item>\r\n              </Nav>\r\n            </Modal.Title>\r\n          </Modal.Header>\r\n          <Modal.Body>\r\n            <Tab.Content>\r\n              <Tab.Pane eventKey=\"login\">\r\n                <LoginForm handleModalClose={() => setShowModal(false)} />\r\n              </Tab.Pane>\r\n              <Tab.Pane eventKey=\"signup\">\r\n                <SignUpForm handleModalClose={() => setShowModal(false)} />\r\n              </Tab.Pane>\r\n            </Tab.Content>\r\n          </Modal.Body>\r\n        </Tab.Container>\r\n      </Modal>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default AppNavbar;\r\n","import React from \"react\";\r\nimport { BrowserRouter as Router, Switch, Route } from \"react-router-dom\";\r\nimport SearchBooks from \"./pages/SearchBooks\";\r\nimport SavedBooks from \"./pages/SavedBooks\";\r\nimport Navbar from \"./components/Navbar\";\r\nimport { ApolloProvider } from \"@apollo/react-hooks\";\r\nimport { ApolloClient } from \"apollo-boost\";\r\n\r\nconst client = new ApolloClient({\r\n  request: (operation) => {\r\n    const t = localStorage.getItem(\"id_token\");\r\n    operation.setContext({\r\n      headers: {\r\n        authorization: t ? `Bearer ${t}` : \"\",\r\n      }\r\n    })\r\n  },\r\n  uri: \"/graphql\",\r\n})\r\n\r\nfunction App() {\r\n  return (\r\n    <Router>\r\n      <>\r\n        <Navbar />\r\n        <Switch>\r\n          <Route exact path=\"/\" component={SearchBooks} />\r\n          <Route exact path=\"/saved\" component={SavedBooks} />\r\n          <Route render={() => <h1 className=\"display-2\">Wrong page!</h1>} />\r\n        </Switch>\r\n      </>\r\n    </Router>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport \"bootstrap/dist/css/bootstrap.min.css\";\r\nimport \"./index.css\";\r\nimport App from \"./App\";\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById(\"root\")\r\n);\r\n"]}}